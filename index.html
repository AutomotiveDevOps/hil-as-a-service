<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>RaaS</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Reality as a Service (RaaS)";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> RaaS</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href=".">Reality as a Service (RaaS)</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#install-gym-environment">Install Gym Environment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#make-a-controller">Make a Controller</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#submit-job">Submit Job</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-it-works">How It Works</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#building-your-own-pendulum">Building Your Own Pendulum</a>
    </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">RaaS</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Reality as a Service (RaaS)</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/perciplex/raas/edit/master/docs/index.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="reality-as-a-service-raas">Reality as a Service (RaaS)</h1>
<p>Reality as a Service (RaaS) is an open source platform for hosting physical OpenAI Gym environments. This lowers the barrier to transitioning to real robots in both effort and cost, allows the outsourcing of maintenance of robots to specialists, amoritized cost of robots over more researchers and RL practitioners, and less useless down-time for expensive robots.</p>
<p>The robot is controlled via a custom gym environment found <a href="https://github.com/perciplex/gym-raas">here</a>. It is designed to be a simple drop-in replacement for the usual OpenAI gym, having the same API as the corresponding OpenAI gym environment.</p>
<p>Try RaaS out here! <a href="http://raas.perciplex.com">raas.perciplex.com</a>.</p>
<p><img alt="" src="img/swingup.gif" /></p>
<h2 id="getting-started">Getting Started</h2>
<h3 id="install-gym-environment">Install Gym Environment</h3>
<p>We use the same interface as OpenAI Gym with a <a href="https://github.com/perciplex/gym-raas">custom environment</a>.
To install the simulated gym-raas environment first install the standard <a href="https://gym.openai.com/docs/">OpenAI gym</a></p>
<pre><code class="sh">pip3 install gym
</code></pre>

<p>Then clone and install our custom environment.</p>
<pre><code class="sh">git clone https://github.com/perciplex/gym-raas
cd gym_raas
pip3 install -e .
</code></pre>

<h3 id="make-a-controller">Make a Controller</h3>
<p>To start a new gym-raas controller, create a new project on Github or fork (it's a button in the right upper corner) our <a href="https://github.com/perciplex/raas-starter">starter repository on GitHub</a>. Either way, you must include <code>run.py</code> at the root directory of the repo which is the entrypoint invoked by our RaaS servers. </p>
<p>gym-raas implements an identical interface to the standard OpenAI gym. See <a href="https://gym.openai.com/docs/">their documentation</a> for more information. The following implements a simple random controller</p>
<pre><code class="python"> import gym
 import gym_raas

 env = gym.make('raaspendulum-v0')
 env.reset()

 for _ in range(1000):
   env.render()
   env.step(env.action_space.sample()) # take a random action

 env.close()
</code></pre>

<p>When run locally, the above code performs a Gym simulation with physical parameters set to match our hardware. When run at RaaS, the code controls an actual robot! The gym-raas environment automatically detects when hardware is available, so no code changes are necessary to transfer from simulation to hardware. In addition, it will add a 0.05 second delay between each call to <code>env.step</code> in order to maintain real-time control at a rate that matches the simulation. </p>
<p>You may be interested in some of our other example projects</p>
<ul>
<li><a href="https://github.com/perciplex/raas-example">https://github.com/perciplex/raas-example</a> - An energy shaping swing-up controller</li>
<li><a href="https://github.com/perciplex/raas-rwg">https://github.com/perciplex/raas-rwg</a> - A controller built by random guessing weights in a neural network </li>
</ul>
<h3 id="submit-job">Submit Job</h3>
<p>To submit, copy the url of your repo into our <a href="https://raas.perciplex.com/#/submit">job submit page</a></p>
<h2 id="how-it-works">How It Works</h2>
<p>The webpage is hosted on an AWS server which is constantly being pinged by a fleet of Raspberry Pis.</p>
<p>The server is responsible for taking POST requests for new jobs, maintaining a queue of jobs, and serving data from completed jobs. It's code may be found in the <a href="https://github.com/perciplex/raas/tree/master/server">/server</a> folder.</p>
<p>The Raspberry Pis have a python program running called <a href="https://github.com/perciplex/raas/blob/master/docker_driver/container_scheduler.py">container_scheduler.py</a>. This program queries the server to pop jobs off the queue. It loads up an Ubuntu <a href="https://github.com/perciplex/raas/tree/master/docker_driver/docker_images">docker image</a> which builds your project by cloning your Github repo and invoking <code>python3 run.py</code> with a timeout of 120 seconds. Upon completion the data of the job is sent to an S3 bucket.</p>
<p>The motor is controlled by a program called <a href="https://github.com/perciplex/raas/blob/master/docker_driver/motor_controller.py">motor_controller.py</a> which communicates into the docker container via ZeroMQ. It in turn uses the <a href="http://abyz.me.uk/rpi/pigpio/pigpiod.html">pigpiod daemon</a> for low level control of the motor and sensing of the encoder.</p>
<p><img alt="" src="img/block_diagram.png" /></p>
<h2 id="building-your-own-pendulum">Building Your Own Pendulum</h2>
<p>The pendulum is built using easily available hardware. The following are instructions for purchase and assembly.</p>
<ul>
<li>Raspberry Pi (We use a Pi 4)</li>
<li>Power Supply for Pi</li>
<li>SD card for Pi</li>
<li>L298N Motor Driver Board.</li>
<li>Ribbon cable</li>
<li>Gearbox Motor with built in encoder. 12V 600 RPM</li>
<li>12V Power Supply</li>
<li>Power supply female donkus plug. DC Power Jack Plug adapter</li>
<li>Wire</li>
<li>Paint Stirrer Rod. Only the best for us!</li>
<li>Mounting 2x4</li>
<li>4mm Flange Shaft Coupling</li>
<li>25mm DC Gearbox Motor Bracket</li>
<li>4x m3 12mm nuts and boltd</li>
<li>Mounting nuts </li>
</ul>
<p>Amazon shopping cart link : <a href="https://www.amazon.com/ideas/amzn1.account.AHWUEKBOXRZZ2YOBITVMXOZ7P2XA/2R26EST3LRFIO">https://www.amazon.com/ideas/amzn1.account.AHWUEKBOXRZZ2YOBITVMXOZ7P2XA/2R26EST3LRFIO</a></p>
<p>More information can be found in the <a href="https://github.com/perciplex/raas/tree/master/hardware">hardware</a> folder of the repo</p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/perciplex/raas/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.1.2
Build Date UTC : 2020-08-20 02:22:15.944260+00:00
-->
